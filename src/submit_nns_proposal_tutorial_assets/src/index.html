<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>submit_nns_proposal_tutorial</title>
    <base href="/">

    <link type="text/css" rel="stylesheet" href="main.css" />
</head>
<body>
    <img src="logo.png" alt="DFINITY logo" />
    <!-- <section>
        <label for="name">Enter your name: &nbsp;</label>
        <input id="name" alt="Name" type="text" />
        <button id="clickMeBtn">Click Me!</button>
    </section> -->
    <!-- <section id="greeting"></section> -->

    <!-- <section> -->
    <div>

        <!-- Section 1 -->
        <div>
            <h1>Goal</h1>
            <br />
            Guide users to submit motion proposals as we did for <a href="https://dashboard.internetcomputer.org/proposal/18337 ">Increased Canister Storage</a>.
            <br />
        </div>

        <!-- Section 2 -->
        <div>
            <h1>Tools and Requirements</h1>
            <br />
            Users will require the following tools:
            <ul>
               <li>NNS Dapp: https://nns.ic0.app/ </li>
               <li>Keysmith: https://github.com/dfinity/keysmith </li>
               <li>Quill: https://github.com/dfinity/quill </li>
               <li>Canister SDK: https://sdk.dfinity.org/docs/quickstart/local-quickstart.html</li>
               <li>Candid Web UI of Governance Canister (id: rrkah-fqaaa-aaaaa-aaaaq-cai): https://a4gq6-oaaaa-aaaab-qaa4q-cai.raw.ic0.app/?id=rrkah-fqaaa-aaaaa-aaaaq-cai</li>  
            </ul>
        </div>

        <!-- Section 3: Steps -->
        <div>
            <h1>Steps to Submit a proposal</h1>

            <p>Note: since the NNS Dapp accounts have only a few ICP and the new  neuron only had 1 ICP, I did all of this on just one laptop connected to the internet.</p>

            <!-- Step 1 -->
            <div>
                <h2>1. Create a key with keysmith</h2>
                <br>
                Generate Seed: keysmith generate -o seed.txt<br />
                <br />
                <code>
                    keysmith private-key -o private.pem<br />
                    Ledger Account: keysmith account -i 0<br />
                </code>

                <br />
                <br />
            </div>

            <!-- Step 2 -->
            <div>

                <h2>2. Link that key to dfx</h2>

                Install that key into dfx and create an identity (called "proposals" in my case) on dfx
                <br />
                <code>dfx identity import proposals private.pem<br /></code>
                <br />
                <br />
                Look at the IDs on quill and dfx to make sure the principals are the same
                <br />
                <code>
                    quill --pem-file private.pem public-ids<br />
                    dfx --identity proposals ledger account-id<br />
                </code>
        
                <br />
                <br />
                In my case it was the same account: 97b5eb9a467f4ce6f43a494ee0bfedeeee0b52d106e0272556c1ad991f99e3da
                <br />

            </div>

            <!-- Step 3 -->
            <div>

                <h2>3. Send at least 1 ICP to the account in step #1<br /></h2>
                <br />
                You need at least 1 ICP to stake a neuron and there are 0.01 transaction fees, so I recommend sending 1.1
                <br />
                Now that your account has ICP, use quill to spawn a neuron
                <br />

                <code>
                quill --pem-file private.pem neuron-stake --name $NAME --amount $AMOUNT > message.json
                quill send message.json
                </code>
                <br/>
                <br/>

            </div>

            <!-- Step 4 -->
            <div>

                <h2>4. Increase neuron dissolve to 1 year with quill<br/></h2>
                One year: 31557600<br/>
                <code>
                quill --pem-file private.pem neuron-manage 148885932052941245 --additional-dissolve-delay-seconds 31557600 > message.json<br/>
                quill send message.json<br/>
                </code>
                <br/>
                <br/>

            </div>

            <!-- Step 5 -->
            <div>
                <h2>5. Send proposal with dfx</h2>
                Manually construct the payload with following parameters:
                <br>
        
                <code>
                    Payload:
                    <br/>
                    {
                    <br/>
                    //type of proposal <br/>
                    action: motion, <br/> 
                    <br/>
                    //this is the summary shown at the top of the proposal. typically few words <br/>
                    summary: "Implement the design...” <br/>
                    <br/>
                    //URL linked, typically a github link here:https://github.com/ic-association/nns-proposals <br/>
                    url="https://github.com/ic-association/nns-proposals... ” <br/>
                    <br/>
                    //description, can be multiple sentences <br/>
                    motionText: "Currently, smart contract canister... "  <br/>
                    <br/>
                    //neuron to propose. Caller must have access to this neuron. This is Diego’s neuron. <br/>
                    neuron: {id=1488859320522941245:nat64} <br/>
                    <br/>
                    } <br/>
                </code>
                <br />
                The actual DFX command:<br />
                <br />
                <code>
                    dfx --identity proposals canister --network ic --no-wallet call rrkah-fqaaa-aaaaa-aaaaq-cai manage_neuron '(record {id = null; command=opt variant {MakeProposal=record {url="urlExample"; action=opt variant {Motion=record {motion_text="motionExample"}}; summary="summaryExample"}}; neuron_id_or_subaccount=opt variant {NeuronId=record {id=148885932052941245:nat64}}})'
                </code>
                
            </div>

            <!-- Step 6 -->
            <div>
                <p>Verify the proposal was submitted.</p>
                Go to https://dashboard.internetcomputer.org/governance 
            </div>
        </div>

    </div>

        
       
        
        

        
        

        
        
        
        

            

    <!-- </section>     -->

</body>
</html>
